<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const elements = document.querySelectorAll('.fade-in');
  const observer = new IntersectionObserver(entries => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add('visible');
        observer.unobserve(entry.target);
      }
    });
  }, { threshold: 0.1 });
  elements.forEach(el => observer.observe(el));
});
</script>

<script>
(function() {
  const duration = 800;
  const navbar = document.querySelector('.navbar');
  const navbarHeight = () => (navbar ? navbar.getBoundingClientRect().height : 0);
  function easeInOutQuad(t) { return t < 0.5 ? 2*t*t : -1 + (4 - 2*t)*t; }
  function animateScroll(start, end, duration) {
    const startTime = performance.now();
    return new Promise(resolve => {
      function frame(now) {
        const elapsed = now - startTime;
        const progress = Math.min(elapsed / duration, 1);
        const eased = easeInOutQuad(progress);
        window.scrollTo(0, Math.round(start + (end - start) * eased));
        if (progress < 1) requestAnimationFrame(frame); else resolve();
      }
      requestAnimationFrame(frame);
    });
  }
  document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function(e) {
      const href = this.getAttribute('href');
      if (!href || href === '#' || href === '#0') return;
      const target = document.querySelector(href);
      if (!target) return;
      e.preventDefault();
      const start = window.scrollY || window.pageYOffset;
      const targetRect = target.getBoundingClientRect();
      const offset = navbarHeight();
      const end = start + targetRect.top - offset;
      animateScroll(start, end, duration).then(() => history.pushState(null, '', href));
    }, { passive: false });
  });
})();
</script>
