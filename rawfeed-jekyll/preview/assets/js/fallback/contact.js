document.addEventListener("DOMContentLoaded",()=>{const a=document.getElementById("contactForm"),n=document.getElementById("submitButton"),g="";function t(o,l,r="success"){const s=document.getElementById("contactMessageModal"),c=s.querySelector(".modal-title"),i=s.querySelector(".modal-body"),e=s.querySelector(".modal-content");e.classList.remove("contact-message-success","contact-message-error","contact-message-warning"),r==="success"?e.classList.add("contact-message-success"):r==="error"?e.classList.add("contact-message-error"):r==="warning"&&e.classList.add("contact-message-warning"),c.innerHTML=o,i.innerHTML=l,new bootstrap.Modal(s).show()}a.addEventListener("submit",async o=>{if(o.preventDefault(),!grecaptcha.getResponse()){t("Warning","Please tick the 'I'm not a robot' box.","warning");return}if(document.getElementById("textMessage").value.trim().length<"50"){t("Warning","the message must have at least 50 characters.","warning");return}n.disabled=!0,n.textContent="sending...wait";const c=new FormData(a),i=Object.fromEntries(c.entries());try{const d=await(await fetch(g,{method:"POST",redirect:"follow",body:JSON.stringify(i)})).json();if(d.result==="success")a.reset(),grecaptcha.reset(),t("Message sent","your message has been sent successfully!","success");else throw t("Error","something went wrong while sending your message.","error"),new Error(d.message||"something went wrong while sending your message.")}catch(e){console.error("Error sending:",e),e.message.includes("reCAPTCHA")?t("Error","Verification failed. Please reload the page and try again.","error"):t("Error","An error occurred while sending the message. Please try again.","error"),grecaptcha.reset()}finally{n.disabled=!1,n.textContent="send!"}})});
