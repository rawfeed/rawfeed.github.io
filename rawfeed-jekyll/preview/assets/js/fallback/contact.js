document.addEventListener("DOMContentLoaded",()=>{const n=document.getElementById("contactForm");if(n){let t=function(o,l,a="success"){const s=document.getElementById("contactMessageModal"),c=s.querySelector(".modal-title"),i=s.querySelector(".modal-body"),e=s.querySelector(".modal-content");e.classList.remove("contact-message-success","contact-message-error","contact-message-warning"),a==="success"?e.classList.add("contact-message-success"):a==="error"?e.classList.add("contact-message-error"):a==="warning"&&e.classList.add("contact-message-warning"),c.innerHTML=o,i.innerHTML=l,new bootstrap.Modal(s).show()};const r=document.getElementById("submitButton"),g="";n.addEventListener("submit",async o=>{if(o.preventDefault(),!grecaptcha.getResponse()){t("Warning","Please tick the 'I'm not a robot' box.","warning");return}if(document.getElementById("textMessage").value.trim().length<"50"){t("Warning","the message must have at least 50 characters.","warning");return}r.disabled=!0,r.textContent="sending...wait";const c=new FormData(n),i=Object.fromEntries(c.entries());try{const d=await(await fetch(g,{method:"POST",redirect:"follow",body:JSON.stringify(i)})).json();if(d.result==="success")n.reset(),grecaptcha.reset(),t("Message sent","your message has been sent successfully!","success");else throw t("Error","something went wrong while sending your message.","error"),new Error(d.message||"something went wrong while sending your message.")}catch(e){console.error("Error sending:",e),e.message.includes("reCAPTCHA")?t("Error","Verification failed. Please reload the page and try again.","error"):t("Error","An error occurred while sending the message. Please try again.","error"),grecaptcha.reset()}finally{r.disabled=!1,r.textContent="send!"}})}});
